(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{272:function(t,e,a){t.exports=a(392)},277:function(t,e,a){},278:function(t,e,a){},392:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),o=a(15),r=a.n(o),c=(a(277),a(278),a(32)),l=a(23),s=a(34),u=a(33),d=a(35),p=a(16),m=a(438),h=a(440),f=a(437),b=a(60),v=a(439),g=a(83),E=a(71),D=a.n(E),O=a(45),y=a.n(O),w=a(436),j=a(405),x=a(230),C=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).state={columns:[{title:"Name",field:"name"},{title:"Description",field:"description"},{title:"Status",field:"status",lookup:{1:"\u6709\u6548",0:"\u65e0\u6548"}}],channelData:[],productData:[]},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e=this.state.channelData.length?this.state.channelData:this.props.channelData;return i.a.createElement(D.a,{title:"\u6e20\u9053\u8868",columns:this.state.columns,data:e,detailPanel:[{tooltip:"\u4ea7\u54c1\u8fde\u63a5",render:function(e){var a=t.props.productData.map(function(t,a){return i.a.createElement(j.a,{key:a,dense:!0},i.a.createElement(x.a,null,"\u4ea7\u54c1\uff1a",t.description),i.a.createElement(x.a,null,"\u8fde\u63a5\uff1ahttps://simcard.jiuyuanxx.com/zop/link/card.html?channel=",e.name,"&product=",t.name,"&oid=[__OID__]"))});return i.a.createElement(w.a,{style:{paddingLeft:"10%"}},a)}}],options:{actionsColumnIndex:-1,pageSize:e.length},editable:{onRowAdd:function(e){return new Promise(function(a){setTimeout(function(){a(),y.a.post("http://api-test.xinwentuan.com/adddata.php",{data:e}).then(function(t){console.log(t.data)}).catch(function(t){console.log(t)});var n=Object(g.a)(t.props.channelData);n.push(e),t.setState({channelData:n})},600)})},onRowUpdate:function(e,a){return new Promise(function(n){setTimeout(function(){n(),y()({method:"post",url:"http://api-test.xinwentuan.com/updata2.php",data:{name:e.name,description:e.description,status:e.status,id:e.id},transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e=e.substring(0,e.lastIndexOf("&"))}],headers:{"Content-Type":"application/x-www-form-urlencoded"}});var i=Object(g.a)(t.props.channelData);i[i.indexOf(a)]=e,t.setState({channelData:i})},600)})}}})}}]),e}(i.a.Component),k=a(205),S=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).state={columns:[{title:"Name",field:"name"},{title:"Description",field:"description"},{title:"Url",field:"url"},{title:"minFirstPay",field:"minFirstPay"},{title:"Status",field:"status",lookup:{1:"\u6709\u6548",0:"\u65e0\u6548"}}],data:[]},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e=this.state.data.length?this.state.data:this.props.productData;return i.a.createElement(D.a,{title:"\u4ea7\u54c1\u8868",columns:this.state.columns,data:e,options:{actionsColumnIndex:-1,pageSize:e.length},editable:{onRowAdd:function(e){return new Promise(function(a){setTimeout(function(){a(),y.a.post("http://api-test.xinwentuan.com/product/adddata.php",{data:e}).then(function(t){console.log(t.data)}).catch(function(t){console.log(t)});var n=Object(g.a)(t.props.productData);n.push(e),t.setState(Object(k.a)({},t.state,{data:n}))},600)})},onRowUpdate:function(e,a){return new Promise(function(n){setTimeout(function(){n(),y()({method:"post",url:"http://api-test.xinwentuan.com/product/updata.php",data:{name:e.name,description:e.description,url:e.url,minFirstPay:e.minFirstPay,status:e.status,id:e.id},transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e=e.substring(0,e.lastIndexOf("&"))}],headers:{"Content-Type":"application/x-www-form-urlencoded"}});var i=Object(g.a)(t.props.productData);i[i.indexOf(a)]=e,t.setState(Object(k.a)({},t.state,{data:i}))},600)})}}})}}]),e}(i.a.Component),I=a(197),R=a(38),T=a(124),N=a(215),P=a(228),M=a(214),U=a(227),F=a(247),B=a(249),z=a(117),q=a(116),H=a(140),_=a(441),A=a(443),W=a(234),G=a(407),J=a(105),K=Object(T.a)(function(t){return{root:{margin:t.spacing(0,3,2),position:"relative"},formControl:{margin:t.spacing(1),minWidth:222,maxWidth:222},timeForm:{margin:t.spacing(1)},group:{margin:t.spacing(1,0)},RadioGroup:{position:"absolute",right:185,top:0,marginTop:80},button:{width:85,position:"absolute",right:50,top:100}}}),V={PaperProps:{style:{maxHeight:224,width:250}}};function L(t){var e=K(),a=i.a.useState(["\u5168\u90e8"]),n=Object(R.a)(a,2),o=n[0],r=n[1],c=i.a.useState(["\u5168\u90e8"]),l=Object(R.a)(c,2),s=l[0],u=l[1],d=i.a.useState(new Date(new Date-2592e5)),p=Object(R.a)(d,2),m=p[0],h=p[1],f=i.a.useState(new Date),b=Object(R.a)(f,2),v=b[0],g=b[1],E=i.a.useState("day"),D=Object(R.a)(E,2),O=D[0],w=D[1],j=Object(J.useSnackbar)().enqueueSnackbar;function C(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}return i.a.createElement("div",{className:e.root},i.a.createElement(U.a,{className:e.formControl},i.a.createElement(P.a,{htmlFor:"select-multiple-checkbox"},"\u6e20\u9053"),i.a.createElement(F.a,{multiple:!0,value:o,onChange:function(t){r(t.target.value)},input:i.a.createElement(N.a,{id:"select-multiple-checkbox"}),renderValue:function(t){return t.join(", ")},MenuProps:V},i.a.createElement(M.a,{key:"\u5168\u90e8",value:"\u5168\u90e8"},i.a.createElement(B.a,{checked:o.indexOf("\u5168\u90e8")>-1}),i.a.createElement(x.a,{primary:"\u5168\u90e8"})),t.channelData.map(function(t){return i.a.createElement(M.a,{key:t.description,value:t.description},i.a.createElement(B.a,{checked:o.indexOf(t.description)>-1}),i.a.createElement(x.a,{primary:t.description}))}))),i.a.createElement(U.a,{className:e.formControl},i.a.createElement(P.a,{htmlFor:"select-product"},"\u4ea7\u54c1"),i.a.createElement(F.a,{multiple:!0,value:s,onChange:function(t){u(t.target.value)},input:i.a.createElement(N.a,{id:"select-product"}),renderValue:function(t){return t.join(", ")},MenuProps:V},i.a.createElement(M.a,{key:"\u5168\u90e8",value:"\u5168\u90e8"},i.a.createElement(B.a,{checked:s.indexOf("\u5168\u90e8")>-1}),i.a.createElement(x.a,{primary:"\u5168\u90e8"})),t.productData.map(function(t){return i.a.createElement(M.a,{key:t.description,value:t.description},i.a.createElement(B.a,{checked:s.indexOf(t.description)>-1}),i.a.createElement(x.a,{primary:t.description}))}))),i.a.createElement("br",null),i.a.createElement(U.a,{className:e.timeForm},i.a.createElement(q.b,{utils:z.default},i.a.createElement(H.b,{disableToolbar:!0,variant:"inline",format:"yyyy/MM/dd",margin:"normal",id:"date-picker-inline",label:"\u5f00\u59cb\u65e5\u671f",value:m,onChange:function(t){h(t)},KeyboardButtonProps:{"aria-label":"change date"}}))),i.a.createElement(U.a,{className:e.timeForm},i.a.createElement(q.b,{utils:z.default},i.a.createElement(H.b,{disableToolbar:!0,variant:"inline",format:"yyyy/MM/dd",margin:"normal",id:"date-picker-inline",label:"\u7ed3\u675f\u65e5\u671f",value:v,onChange:function(t){g(t)},KeyboardButtonProps:{"aria-label":"change date"}}))),i.a.createElement(U.a,{className:e.RadioGroup},i.a.createElement(G.a,{component:"legend"},"\u7edf\u8ba1\u65b9\u5f0f"),i.a.createElement(A.a,{"aria-label":"gender",name:"gender1",className:e.group,value:O,onChange:function(t){w(t.target.value)},row:!0},i.a.createElement(W.a,{value:"day",control:i.a.createElement(_.a,{color:"primary"}),label:"\u5929"}),i.a.createElement(W.a,{value:"total",control:i.a.createElement(_.a,{color:"primary"}),label:"\u5408\u8ba1"}))),i.a.createElement(I.a,{variant:"contained",color:"primary",className:e.button,onClick:function(){var e=[],a=[];if(o.length>0)if(o.indexOf("\u5168\u90e8")>-1?t.channelData.map(function(t){return e.push(t.name),e}):o.map(function(a){return t.channelData.map(function(t){return a===t.description&&e.push(t.name),t}),e}),s.length>0){s.indexOf("\u5168\u90e8")>-1?t.productData.map(function(t){return a.push(t.name),e}):s.map(function(e){return t.productData.map(function(t){return e===t.description&&a.push(t.name),t}),e});var n=C(m)+" 0:00:00",i=C(v)+" 23:59:59";console.log("post->channel:",e),console.log("product:",a),console.log("startDate:",n),console.log("endState:",i),console.log("method:",O),y()({method:"post",url:"http://api-test.xinwentuan.com/records/getdata3.php",data:{channel:e,product:a,startDate:n,endDate:i,method:O},transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e=e.substring(0,e.lastIndexOf("&"))}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){"err"===e.data?j("\u672a\u641c\u7d22\u5230\u76f8\u5e94\u6570\u636e",{variant:"error",autoHideDuration:1e3}):(console.log("\u7b5b\u9009\u540e\u6570\u636e\uff1a",e.data),t.searchBtn(e.data))})}else j("\u4ea7\u54c1\u4e0d\u80fd\u4e3a\u7a7a",{variant:"warning",autoHideDuration:1e3});else j("\u6e20\u9053\u4e0d\u80fd\u4e3a\u7a7a",{variant:"warning",autoHideDuration:1e3})}},"\u641c\u7d22"))}var Y=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).state={columnsDay:[{title:"\u65e5\u671f",field:"date"},{title:"\u6e20\u9053",field:"channel"},{title:"\u4ea7\u54c1",field:"product"},{title:"\u6548\u679c\u6570",field:"count"}],columnsTotal:[{title:"\u6e20\u9053",field:"channel"},{title:"\u4ea7\u54c1",field:"product"},{title:"\u6548\u679c\u6570",field:"count"}],data:[]},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;y.a.post("http://api-test.xinwentuan.com/records/getdata.php").then(function(e){t.setState({data:e.data})})}},{key:"handleChange",value:function(t,e){this.props.handleChange(t,3),this.props.setRecordsDetails(e)}},{key:"searchBtn",value:function(t){this.setState({data:t})}},{key:"render",value:function(){var t=this,e=[];this.state.data.length&&(e=this.state.data[0].date?this.state.columnsDay:this.state.columnsTotal);var a=this.state.data.length<50?this.state.data.length:50;return i.a.createElement(D.a,{title:"\u7edf\u8ba1",columns:e,data:this.state.data,options:{actionsColumnIndex:-1,pageSize:a,pageSizeOptions:[20,50,100],exportButton:!0,exportCsv:function(e,a){t.props.enqueueSnackbar("\u672a\u5f00\u653e",{variant:"warning",autoHideDuration:1500})}},actions:[{icon:"save",tooltip:"\u8be6\u60c5",onClick:function(e,a){return t.handleChange(e,a)}}],components:{Action:function(t){return i.a.createElement(I.a,{onClick:function(e){return t.action.onClick(e,t.data)},color:"primary",variant:"contained",style:{textTransform:"none"},size:"small"},"\u8be6\u60c5")},Toolbar:function(e){return i.a.createElement("div",null,i.a.createElement(E.MTableToolbar,e),i.a.createElement(L,{channelData:t.props.channelData,productData:t.props.productData,searchBtn:t.searchBtn.bind(t)}))}}})}}]),e}(i.a.Component),$=Object(J.withSnackbar)(Y),Q=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).state={columns:[{title:"dt",field:"dt"},{title:"channelName",field:"channelName"},{title:"productName",field:"productName"},{title:"orderId",field:"orderId"},{title:"openId",field:"openId"},{title:"State",field:"state"},{title:"firstPay",field:"firstPay"},{title:"msgId",field:"msgId"},{title:"Mobile",field:"mobile"},{title:"Ctime",field:"ctime"},{title:"oid",field:"oid"}],data:[],title:""},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.props.data.length?this.props.data:this.state.data,e=t.length<50?t.length:50;return i.a.createElement(D.a,{title:this.props.title,columns:this.state.columns,data:t,options:{pageSize:e,pageSizeOptions:[20,50,100]}})}}]),e}(i.a.Component);function X(t){var e=t.children,a=t.value,n=t.index,o=Object(p.a)(t,["children","value","index"]);return i.a.createElement(b.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},o),i.a.createElement(v.a,{p:3},e))}function Z(t){return{id:"simple-tab-".concat(t),"aria-controls":"simple-tabpanel-".concat(t)}}var tt=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).state={value:0,channelData:[],productData:[],recordsDetails:{},detailsTitle:""},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;y.a.post("http://api-test.xinwentuan.com/getdata.php").then(function(e){t.setState({channelData:e.data})}),y.a.post("http://api-test.xinwentuan.com/product/getdata.php").then(function(e){t.setState({productData:e.data})})}},{key:"handleChange",value:function(t,e){this.setState({value:e})}},{key:"transformName",value:function(t,e){var a="";return t.map(function(t){return t.description===e?a=t.name:a}),a}},{key:"setRecordsDetails",value:function(t){var e=this,a={},n="\u6e20\u9053\uff1a"+t.channel+" \uff0c\u4ea7\u54c1\uff1a"+t.product;a.channel=this.transformName(this.state.channelData,t.channel),a.product=this.transformName(this.state.productData,t.product),t.date&&(a.startDate=t.date+" 0:00:00",a.endDate=t.date+" 23:59:59"),y()({method:"post",url:"http://api-test.xinwentuan.com/records/getdata_details.php",data:a,transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e=e.substring(0,e.lastIndexOf("&"))}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){"err"===t.data?alert("\u672a\u83b7\u53d6\u5230\u6570\u636e"):e.setState({recordsDetails:t.data,detailsTitle:n})})}},{key:"render",value:function(){var t=this.state.value;return i.a.createElement("div",null,i.a.createElement(m.a,{position:"static"},i.a.createElement(h.a,{value:t,onChange:this.handleChange.bind(this),"aria-label":"simple tabs example"},i.a.createElement(f.a,Object.assign({label:"\u7edf\u8ba1"},Z(0))),i.a.createElement(f.a,Object.assign({label:"\u6e20\u9053\u8868"},Z(1))),i.a.createElement(f.a,Object.assign({label:"\u4ea7\u54c1\u8868"},Z(2))),i.a.createElement(f.a,Object.assign({label:""},Z(3))))),i.a.createElement(X,{value:t,index:0},i.a.createElement($,{handleChange:this.handleChange.bind(this),setRecordsDetails:this.setRecordsDetails.bind(this),channelData:this.state.channelData,productData:this.state.productData})),i.a.createElement(X,{value:t,index:1},i.a.createElement(C,{channelData:this.state.channelData,productData:this.state.productData})),i.a.createElement(X,{value:t,index:2},i.a.createElement(S,{productData:this.state.productData})),i.a.createElement(X,{value:t,index:3},i.a.createElement(Q,{data:this.state.recordsDetails,title:this.state.detailsTitle})))}}]),e}(i.a.Component);var et=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(tt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(J.SnackbarProvider,null,i.a.createElement(et,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[272,1,2]]]);
//# sourceMappingURL=main.838411f4.chunk.js.map